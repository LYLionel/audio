"use strict";require(["./config"],function(){require(["jquery","draggable"],function(i){var t=["mp3/1.mp3","mp3/2.mp3","mp3/3.mp3","mp3/4.mp3","mp3/5.mp3","mp3/6.mp3","mp3/7.mp3","mp3/8.mp3","mp3/9.mp3"];({init:function(){this.video_time(),this.drag(),this.drag_move(),this.jindu(),this.width=i(".bar_box").width(),this.next(),this.pre(),this.random(),this.order(),this.index=+i("#video").attr("index"),this.change_music()},video_time:function(){this.video=document.getElementById("video");var t=this;video.addEventListener("canplay",function(){t.time=-~t.video.duration;var n=~~(-~t.video.duration/60)>=10?~~(-~t.video.duration/60):"0"+String(~~(-~t.video.duration/60)),e=-~t.video.duration%60>=10?-~t.video.duration%60:"0"+String(-~t.video.duration%60);i(".all_time").html(n+":"+e),t.video.play(),t.stop(),t.start(),t.move(),t.volume()})},drag:function(){var t=this,n=document.getElementsByClassName("yd")[0];draggable(n,{x:!0,y:!1,paddingRight:-12,callback:function(n,e){t.left=e.x,i(".bar").width(t.left)}})},stop:function(){var t=this;i(".stop").on("click",function(){i(".music_img").removeClass("turn"),t.video.pause(),i(this).hide(),i(".start").show()})},start:function(){var t=this;i(".start").on("click",function(){i(".music_img").addClass("turn"),t.video.play(),i(this).hide(),i(".stop").show()})},drag_move:function(){var t=this;i(".yd").on("mousedown",function(){t.change=!0}),i(".yd").on("mouseup",function(){t.change=!1,width=i(".bar_box").width(),t.f_drag_move(t.left),t.move(),i(".start").hide(),i(".stop").show(),i(".music_img").addClass("turn")})},f_drag_move:function(t){var n=~~(t/this.width*this.time);this.video.currentTime=n;var e=~~(n/60)>=10?n:"0"+String(~~(n/60)),o=n%60>=10?n%60:"0"+String(n%60);i(".time").html(e+":"+o)},move:function(){var t=this,n=setInterval(function(){t.change&&clearInterval(n),t.now_time=-~t.video.currentTime,t.now_time==t.time&&(t.on_random&&t.f_random(),t.play_video(t.index+1));var e=~~(t.now_time/60)>=10?t.now_time:"0"+String(~~(t.now_time/60)),o=t.now_time%60>=10?t.now_time%60:"0"+String(t.now_time%60);wz=~~(t.now_time/t.time*i(".bar_box").width()),i(".bar").width(wz),i(".yd").css("left",wz),i(".time").html(e+":"+o)},1e3)},jindu:function(){var t=this;i(".bar_box").on("click",function(n){"bar"!=n.target.className&&"bar_box"!=n.target.className||(i(".bar").width(n.offsetX),i(".yd").css("left",n.offsetX),t.f_drag_move(n.offsetX),i(".start").hide(),i(".stop").show(),i(".music_img").addClass("turn"))})},volume:function(){var t=this;i(".volume_box").on("click",function(n){"volume"!=n.target.className&&"volume_box"!=n.target.className||(i(".volume").width(n.offsetX),t.video.volume=~~(i(".volume").width()/i(this).width()*100)/100)})},next:function(){var n=this;i(".next").on("click",function(){n.on_random&&n.f_random(),n.index=n.index+1,n.index>=t.length&&(n.index=0),n.play_video(n.index),i("#video").attr("index",n.index),i(".start").hide(),i(".stop").show(),i(".music_img").addClass("turn")})},pre:function(){var n=this;i(".pre").on("click",function(){n.index=n.index-1,n.index<0&&(n.index=t.length-1),n.play_video(n.index),i("#video").attr("index",n.index),i(".start").hide(),i(".stop").show(),i(".music_img").addClass("turn")})},play_video:function(n){n>=t.length&&(n=0),this.index=n,i("#video").attr("index",this.index),i("#video").attr("src",t[n])},random:function(){var t=this;i("#random").on("click",function(){i(this).hide(),i("#order").show(),t.on_random=!0})},f_random:function(){index=~~(Math.random()*t.length)-1,this.index=index,console.log(this.index)},order:function(){var t=this;i("#order").on("click",function(){i(this).hide(),i("#random").show(),t.on_random=!1})},change_music:function(){var t=this;i(".music").on("dblclick",function(n){"LI"==n.target.nodeName&&t.play_video(i(n.target).index())})}}).init()})});